@authToken = {{login.response.body.user.token}}
@idUserLoged = {{login.response.body.user._id}}
@mail = "mail25@lito.com"
@idPet = {{addNewPetToUser.response.body.$.id}}


### 
POST http://localhost:8000/api/auth/register HTTP/1.1
content-type: application/json

{
    "user":{
        "name": "TEST",
       "last_name":"TESTT",
     "email": {{mail}},
    "password":"1234"
    }
}

###
GET  http://localhost:8000/api/me HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

### good passwod
# @name login
POST  http://localhost:8000/api/auth/login HTTP/1.1
content-type: application/json

{
    "user":
        {
    "email":{{mail}},
    "password":"1234"
    }
}

### Bad password
POST  http://localhost:8000/api/auth/login HTTP/1.1
content-type: application/json

{
"user":{    
    "email":"mail3@lito.com",
    "password":"12345"}
}

### FORGOT password
POST  http://localhost:8000/api/auth/forgot HTTP/1.1
content-type: application/json

{
    "email":{{mail}}
}


### FORGOT password
PUT  http://localhost:8000/api/auth/restore HTTP/1.1
content-type: application/json

{
    "email":{{mail}},
    "token":"$2a$04$luAimd2kGOBIYVQiuaEbqO",
    "password":"123456"
}


### Add new pet to user loged

# @name addNewPetToUser
POST http://localhost:8000/api/users/{{idUserLoged}}/pets HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

{
    "pet":{
         "species": "cat",
         "sex": "female",
         "age": "old",
         "name": "LAME"
    }
}

### Get pets from user 
GET http://localhost:8000/api/users/{{idUserLoged}}/pets HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

### Get pet from user 
GET http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}} HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

### Add new search to pet
POST http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}}/search HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

{
    "location":{
        "type" : "Point",
        "coordinates" : [
            -35.51713,
            -58.31567
        ]
    },
    "date": "2019-05-01T00:00:00.000Z"
}

### Get search from user 
GET http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}}/search HTTP/1.1
content-type: application/json
Authorization: {{authToken}}


### Get pet search
GET http://localhost:8000/api/pets/{{idPet}}/search HTTP/1.1
content-type: application/json

### Get pet contact
GET http://localhost:8000/api/pets/{{idPet}}/contact HTTP/1.1
content-type: application/json
Authorization: {{authToken}}

### Get pets arrownd position
GET http://localhost:8000/api/lostpets HTTP/1.1
    ?lat=-35.522620524394135
    &long=-58.30532461073403 
content-type: application/json


### delete search from pet
DELETE http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}}/search HTTP/1.1
content-type: application/json
Authorization: {{authToken}}



### Test image avatar UPLOAD user avatar 
POST  http://localhost:8000/api/me/avatar
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: {{authToken}}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="text"

avatar
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="avatar"; filename="1.png"
Content-Type: image/png

< ./1.png
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### Test image avatar OBTAIN user avatar
get  http://localhost:8000/api/me/avatar
Authorization: {{authToken}}
### Test image avatar REMOVE user avatar
DELETE   http://localhost:8000/api/me/avatar
Authorization: {{authToken}}



### Test image pets UPLOAD pet principal image
POST  http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}}/pics
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: {{authToken}}
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="text"

principal
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="principal"; filename="1.png"
Content-Type: image/png

< ./1.png
------WebKitFormBoundary7MA4YWxkTrZu0gW--


### remove pics pics1561313565493
DELETE   http://localhost:8000/api/users/{{idUserLoged}}/pets/{{idPet}}/pics/pics1561313565493
Authorization: {{authToken}}
